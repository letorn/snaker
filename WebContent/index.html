<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Snaker</title>
<script type="text/javascript" src="common/jquery.min.js"></script>
<script type="text/javascript" src="common/jquery.upload.js"></script>
<script type="text/javascript" src="common/jquery.custom.js"></script>
<link rel="stylesheet" type="text/css" href="common/easyui/themes/default/easyui.css">
<link rel="stylesheet" type="text/css" href="common/easyui/themes/icon.css">
<script type="text/javascript" src="common/easyui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="common/easyui/locale/easyui-lang-zh_CN.js"></script>
<script type="text/javascript">
	$(function() {
		$.render = function(render) {
			$._render = render;
		}
		$.doRender = function(el, force) {
			var $el = $(el);
			if (!$el.rendered || force) {
				if (!$el.render && $._render) $el.render = $._render;
				if ($el.render) $el.render($el);
				$el.rendered = true;
			}
			delete $._render;
		}

		$.parser.auto = false;

		var $indexContent = $('#index-content'), $indexScripts = $('#index-scripts');
		
		window.Content = {
				$indexContent: $indexContent,
				addTab: function(text, location, scripts) {
					if ($indexContent.tabs('getTab', text)) {
						$indexContent.tabs('select', text)
					} else {
						if (scripts) {
							scripts = scripts.split(';')
							for (var i = 0; i < scripts.length; i++) {
								$indexScripts.append('<script type="text/javascript" src="' + scripts[i] + '"><\/script>');
							}
							$.parser.parse('index-scripts');
						}
						
						var tab = $indexContent.tabs('add', {
							closable: true,
							title: text,
							href: location,
							onLoad: function() {
								// $.parser.parse(tab);
								$.doRender(tab.tabs('getSelected'));
							}
						});
					}
				},
				getSelected: function() {
					var _this = window.Content;
					return _this.$indexContent.tabs('getSelected');
				}
		}
		
		$('#index-accordion p').click(function() {
			var $p = $(this), text = $p.text(), location = $p.data('location'), scripts = $p.data('scripts');
			if ($indexContent.tabs('getTab', text)) {
				$indexContent.tabs('select', text)
			} else {
				if (scripts) {
					scripts = scripts.split(';')
					for (var i = 0; i < scripts.length; i++) {
						$indexScripts.append('<script type="text/javascript" src="' + scripts[i] + '"><\/script>');
					}
					$.parser.parse('index-scripts');
				}
				
				var tab = $indexContent.tabs('add', {
					closable: true,
					title: text,
					href: location,
					onLoad: function() {
						$.parser.parse(tab);
						$.doRender(tab);
					}
				});
			}
		});
	});
</script>
</head>
<body class="easyui-layout">
	<div id="index-scripts" style="display:none"></div>
	<div id="index-accordion" class="easyui-accordion" data-options="region:'west',title:'菜单',split:true" style="width:100px">
		<div data-options="title:'任务管理'" style="text-align:center">
			<p data-location="process/list.html" style="cursor:pointer;color:blue">流程定义</p>
			<p data-location="workflow/list.html" style="cursor:pointer;color:blue">待办任务</p>
			<p data-location="data/file.html" style="cursor:pointer;color:blue">文件管理</p>
			<p data-location="data/enterprise.html" style="cursor:pointer;color:blue">所有企业</p>
			<p data-location="data/jobhunter.html" style="cursor:pointer;color:blue">所有求职者</p>
			<p data-location="module/demo.html" style="cursor:pointer;color:blue">模型例子</p>
		</div>
	</div>
	<div id="index-content" class="easyui-tabs" data-options="region:'center'">
		<div data-options="title:'主页'">拼命开发中...</div>
	</div>
</body>
</html>